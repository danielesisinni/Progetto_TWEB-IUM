<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Cache-Control" content="no-store" />
    <title>Booking</title>

    <link href="bootstrap-4.5.2-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/jquery-slim.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link rel="stylesheet" href="css/stileindex.css">

</head>

<body>
    <div id="components">
        <span v-if="loginHome"><br><br><br><br><br>
            <div class="container h-100">
                <div class="d-flex justify-content-center h-100">
                    <div class="user_card">
                        <div class="d-flex justify-content-center">
                            <div class="brand_logo_container">
                                <img src="https://upload.wikimedia.org/wikipedia/it/thumb/4/47/Unito-logo.svg/1200px-Unito-logo.svg.png" class="brand_logo" alt="Logo">
                            </div>
                        </div>
                        <br>
                        <div class="d-flex justify-content-center form_container">
                            <article class="form-group">
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                    <input v-model="em" type="text" class="form-control input_user" placeholder="Email">
                                </div>
                                <div class="input-group mb-2">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                                    </div>
                                        <input v-model="pass" type="password" class="form-control input_pass" placeholder="Password">
                                </div>
                                <div class="d-flex justify-content-center mt-3 login_container">
                                    <button v-on:click="ServletControllerPost('login', '')" class="btn login_btn">Autentica </button>
                                </div>

                                <template v-if="checkE">
                                    <span class="badge badge-danger">Errore nel login</span>
                                </template>
                                <br>
                                <centro-login v-on:ospite-inner="ServletControllerPost('ospite', '')" v-on:creazione-inner="transit('creazione')" ></centro-login>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </span>

        <span v-if="creazionehome"><br>
            <testa title="BENVENUTO. CREA IL TUO ACCOUNT"></testa>
            <br><br><br>
            <div class="container h-100">
                <div class="d-flex justify-content-center h-100">
                    <div class="user_card">
                        <div class="d-flex justify-content-center">
                            <div class="brand_logo_container">
                                <img src="https://upload.wikimedia.org/wikipedia/it/thumb/4/47/Unito-logo.svg/1200px-Unito-logo.svg.png" class="brand_logo" alt="Logo">
                            </div>
                        </div>
                        <div class="d-flex justify-content-center form_container">
                            <article class="form-group">
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                    <input v-model="em" type="text" class="form-control input_user" placeholder="Email">
                                </div>
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                        <input v-model="acc" type="text" class="form-control input_user" placeholder="Account">
                                </div>
                                <div class="input-group mb-2">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                                    </div>
                                        <input v-model="pass" type="password" class="form-control input_pass" placeholder="Password">
                                </div>
                                <div class="d-flex justify-content-center mt-3 login_container">
                                    <button v-on:click="ServletControllerPost('crea', '')" class="btn login_btn">Crea account </button>
                                </div>
                                <div class="d-flex justify-content-center mt-3 login_container">
                                    <button v-on:click="transit('loginHome')" class="btn login_btn">Annulla creazione</button>
                                </div>
                                <template v-if="errore2">
                                    <span class="badge badge-danger">Errore nei dati, ricontrolla e riprova. Grazie</span>
                                </template>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </span>

        <span v-if="homeCliente && role === 'Cliente'">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('clienteHome')">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('mieprenotazioni')">Prenotazioni</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('ripetizioni')">Ripetizioni</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                </div>
            </nav>

            <!--HOME CLIENTE-->
            <home v-if="checkCl" v-on:transit-inner-prenotazioni="transit('mieprenotazioni')" v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')"></home>


            <!--SEZIONE STAMPA E AGGIUNTA DEI DATI-->
            <div class="container">
               <hr>
                <!--STAMPA DEI CORSI E DOCENTI-->
                <div v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE MIE PRENOTAZIONI-->
                <div v-if="stampaMPr">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printMPr">
                                <tr><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td><td v-if="prenotazioni.status === 'RIMOSSA'"><button class="btn btn-info" v-on:click="ServletControllerPost('Riprenota', prenotazioni.codice)">Riprenota</button></td><td v-else><button class="btn btn-danger" v-on:click="ServletControllerPost('Disdetta', prenotazioni.codice)">Disdetta</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE RIPETIZIONI-->
                <div v-if="stampaR">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.codice}}</td><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td><td><span class="badge bg-warning text-dark">{{ripetizioni.status}}</span></td><td><button class="btn btn-info" v-on:click="ServletControllerPost('Prenota', ripetizioni.codice)">Prenota</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <template v-if="errore2" class="container">
                        <span class="badge badge-danger">Ti sei gi√† prenotato per questa lezione.</span>
                </template>
            </div>

        </span>

        <span v-if="homeOspite && role === 'Ospite'">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav2">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('ospiteHome')">Home</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="nav-item">
                    <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                </div>
            </nav>

            <home v-if="checkO"  v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')" v-on:transit-inner-prenotazioni="transit('alert')"></home>

            <!--SEZIONE STAMPA DEI DATI-->
            <div class="container">
               <hr>
                <div v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <div v-if="stampaR">
                    <h4>Per prenotare le lezioni devi avere un account. Registrati e prenota!</h4>
                    <br>
                    <table>
                        <thead>
                            <tr><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </span>

        <span v-if="homeAmministratore && role === 'Amministratore'">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav3">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('amministratoreHome')">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('mieprenotazioni')">Prenotazioni</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('ripetizioni')">Ripetizioni</a>
                            </li>
                        </ul>
                    </div>

                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Men&uacute; amministratore
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" >
                            <button class="dropdown-item"  v-on:click="transit('prenotazioni')">Le prenotazioni registrate</button><br>
                            <button class="dropdown-item" v-on:click="transit('gestioneCD')">Gestione di corsi e docenti</button><br>
                            <button class="dropdown-item" v-on:click="transit('gestioneR')">Gestione delle ripetizioni</button>
                        </div>
                    </div>
                </div>
                <div class="nav-item">
                    <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                </div>
            </nav>
            <!--HOME AMMINISTRATORE-->

            <home v-if="checkAH" v-on:transit-inner-prenotazioni="transit('mieprenotazioni')" v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')"></home>

            <!--SEZIONE STAMPA E AGGIUNTA DEI DATI-->
            <div class="container">
               <hr>
                <!--STAMPA DEI CORSI E DOCENTI-->
                <span v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </span>

                <!--STAMPA DELLE RIPETIZIONI-->
                <span v-if="stampaR">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.codice}}</td><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td><td><span class="badge bg-warning text-dark">{{ripetizioni.status}}</span></td><td><button class="btn btn-info" v-on:click="ServletControllerPost('Prenota', ripetizioni.codice)">Prenota</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </span>

                <!--STAMPA DELLE PRENOTAZIONI-->
                <span v-if="stampaPr">
                    <table>
                        <thead>
                            <tr><td><i><b>UTENTE</b></i></td><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printPr">
                                <tr><td>{{prenotazioni.utente}}</td><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td></tr>
                            </template>
                        </tbody>
                    </table>
                </span>

                <!--STAMPA DELLE MIE PRENOTAZIONI-->
                <span v-if="stampaMPr">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printMPr">
                                <tr><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td><td v-if="prenotazioni.status === 'RIMOSSA'"><button class="btn btn-info" v-on:click="ServletControllerPost('Riprenota', prenotazioni.codice)">Riprenota</button></td><td v-else><button class="btn btn-danger" v-on:click="ServletControllerPost('Disdetta', prenotazioni.codice)">Disdetta</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </span>

                <!--AGGIUNTA DI CORSI E DOCENTI-->
                <span v-if="gestioneCD">
                    <h4>Aggiunta di corsi e docenti affiliati</h4>
                    <p>-Hai la possibilit&aacute; di aggiungere un nuovo corso, un nuovo docente e creare la loro affiliazione.</p>
                    <br>
                    <div class="form-group">
                        <label for="aggiungiCorso">Aggiungi il corso:&nbsp&nbsp&nbsp&nbsp
                            <input v-model="courses" id="aggiungiCorso" type="text"  placeholder="Nome" required>
                        </label><br>
                        <label for="aggiungiDocente">Aggiungi il docente:
                            <input v-model="teacher" id="aggiungiDocente" type="text" placeholder="Nome e Cognome" required>
                        </label>
                        <br>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" v-on:click="ServletControllerPost('Corsi_Docenti', 'Aggiunta')">Conferma dati</button>
                        </div>
                    </div>
                    <hr>
                    <h4>Rimozione di corsi e docenti</h4>
                    <p>-Hai la possibilit&aacute; di rimuovere un docente o un corso con le loro affiliazioni. Solo se non compaiono in nessuna prenotazioni attiva.</p>
                    <p>Seleziona il docente e il corso da rimuovere.</p>
                    <table class="tabellaDocenti">
                        <thead>
                            <tr><td><i><b>DOCENTI</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="docente in printD">
                                <tr><td>{{docente.nome}}</td><td><button class="btn btn-primary" v-on:click="ServletControllerPost('Corsi_Docenti', docente.nome)">Elimina</button></td></tr>
                            </template>
                        </tbody>
                    </table>

                    <table class="tabellaCorsi">
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="corso in printC">
                                <tr><td>{{corso.titolo}}</td><td><button class="btn btn-primary" v-on:click="ServletControllerPost('Corsi_Docenti', corso.titolo)">Elimina</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </span>

                <!--AGGIUNTA DELLE RIPETIZIONI-->
                <span v-if="gestioneR">
                    <h4>Aggiunta di nuove ripetizioni</h4>
                    <p>-Scegli il docente, il corso, la data e l'ora della ripetizione.</p>
                    <br>
                    <div class="form-group">
                        <label>Docente
                            <select v-model="teacher">
                                <option v-for="co_do in printD">{{co_do.nome}} {{co_do.cognome}}</option>
                            </select>
                        </label>
                        <label>Corso
                            <select v-model="courses">
                                <option v-for="co_do in printC">{{co_do.titolo}}</option>
                            </select>
                        </label>
                        <label>Data
                            <select v-model="day">
                                <option>Lunedi</option>
                                <option>Martedi</option>
                                <option>Mercoledi</option>
                                <option>Giovedi</option>
                                <option>Venerdi</option>
                            </select>
                        </label>
                        <label>Ora
                            <select v-model="hour">
                                <option>15:00/16:00</option>
                                <option>16:00/17:00</option>
                                <option>17:00/18:00</option>
                                <option>18:00/19:00</option>
                            </select>
                        </label>
                            <br>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" v-on:click="ServletControllerPost('Ripetizioni', '')">Conferma dati</button>
                            </div>
                        </div>

                        <hr>
                        <h4>Rimozione delle ripetizioni</h4>
                        <p>-Hai la possibilit&aacute; di rimuovere una ripetizione. Solo se non &eacute; attiva, cio&eacute; gi&aacute; prenotata da un cliente.</p>
                        <label>Seleziona il codice della prenotazione&nbsp&nbsp&nbsp&nbsp&nbsp
                            <select v-model="prenElim">
                                <option v-for="ripetizioni in printR">{{ripetizioni.codice}}</option>
                            </select>
                        </label>

                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.codice}}</td><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td><td><span class="badge bg-warning text-dark">{{ripetizioni.status}}</span></td><td><button class="btn btn-info" v-on:click="ServletControllerPost('Prenota', ripetizioni.codice)">Prenota</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                        <br>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" v-on:click="ServletControllerPost('Ripetizioni', 'Rimozione')">Conferma</button>
                        </div>
                    </span>

                <!--STAMPA DELL'ERRORE O SUCCESSO-->
                <template v-if="errore2" >
                            <span class="badge badge-danger">Errore nell' effettuare l'operazione, ricontrolla e riprova. Grazie</span>
                    </template>
                <template v-if="successo">
                            <span class="badge badge-success">Successo</span>
                    </template>
            </div>

        </span>
    </div>

    <script>
        //VueLogin
        Vue.component('centro-login',{
            template:'<article class="d-flex justify-content-center links">' +
                    '     <p>Non hai ancora un account? <button type="button" class="btn btn-outline-dark" style="background: #c0392b" v-on:click="creazioneInner"> Crea account</button>' +
                    '     <br><br>Oppure entra come ospite&nbsp&nbsp&nbsp&nbsp<button type="button" class="btn btn-outline-dark" style="background: #c0392b" v-on:click="ospiteInner">Entra </button></p>' +
                    '</article>',
            methods: {
                creazioneInner: function (){
                    this.$emit('creazione-inner');
                },

                ospiteInner: function (){
                    this.$emit('ospite-inner');
                }
            }
        })

        //home di ospite/cliente/amministratore
        Vue.component('home',{
            template:
                '<article class="container">' +
                '    <br><br>' +
                '        <h5>Scegli l&rsquo;opzione che desideri</h5>\n' +
                '            <br>\n' +
                '            <button class="botton" v-on:click="transitCorsi_Docenti"><img src="img/lista.png" width="280" height="280" alt><br> Visualizza corsi e docenti</button>\n' +
                '&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'+
                '            <button class="botton" v-on:click="transitRipetizioni"><img src="img/prenotazionecortisonici2020-1.png" width="280" height="280" alt><br>Prenota le tue lezioni</button>\n' +
                '&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'+
                '            <button class="botton" v-on:click="transitPrenotazioni"> <img src="img/docentecorso.png" height="280" width="280" alt> <br>Le  mie prenotazioni</button>\n' +
                '</article>',
            methods: {
                transitPrenotazioni: function () {
                    this.$emit('transit-inner-prenotazioni');
                },
                transitDocenti: function () {
                    this.$emit('transit-inner-docenti');
                },
                transitRipetizioni: function () {
                    this.$emit('transit-inner-ripetizioni');
                },
                transitCorsi_Docenti: function (){
                    this.$emit('transit-inner-corsi_docenti');
                }
            }
        })

        var app = new Vue ({
            el: '#components',
            data: {
                /*SEZIONE LOGIN*/               loginHome: true, em: null, acc: null, pass: null, role: 'Amministratore', checkE: false,
                /*SEZIONE HOME AMMINISTRATORE*/ homeAmministratore: false, logout: false, errore2: false, successo: false, checkAH: false, gestioneCD: false, gestioneR: false, printPr: [], stampaPr: false, courses: null, teacher: null, docElim: null, corsElim: null, day: null, hour: null, prenElim: null,
                /*SEZIONE HOME OSPITE*/         homeOspite: false, checkO: false,
                /*SEZIONE HOME CLIENTE*/        homeCliente: false, checkCl: false, printCD: [], printC: [], printD: [], printR: [], printMPr: [], stampaCD: false, stampaD: false, stampaR: false, stampaMPr: false,
                /*SEZIONE CREAZIONE*/           creazionehome: false,
                link: 'ServletController'
            },
            methods: {
                //ServletController, gestisce le Servlet che ci servono con la doPost e passa i data che ottiene alle chiamate
                ServletControllerPost: function (flag, flag2){
                    var self = this;
                    $.post(this.link, {email: this.em, account: this.acc, password: this.pass, action: flag, action2: flag2, corsi: this.courses, nome: this.teacher, cognome: this.var2, giorno: this.day, ora: this.hour, docEli: this.docElim, corEli: this.corsElim, prenEli: this.prenElim}, function (data) {
                        //Sezione Servlet Login
                        switch (flag){
                            case "login": case "crea": case "ospite":
                                switch (data) {
                                    case 'sono amministratore':
                                        self.role = 'Amministratore'; self.checkE = false; self.transit("amministratoreHome"); break;
                                    case 'sono cliente':
                                        self.role = 'Cliente'; self.checkE = false; self.transit("clienteHome"); break;
                                    case 'ospite':
                                        self.role = 'Ospite'; self.transit("ospiteHome"); break;
                                    case 'crea':
                                        self.em = self.acc = self.pass = null; self.errore2 = false; alert('Successo: Account creato'); self.transit('loginHome'); break;
                                    case 'errore':
                                        self.checkE = true; break;
                                    case 'errore2':
                                        self.errore2 = true; break;
                                }
                                break;
                            //Sezione Servlet/Logout
                            case "logout":
                                self.em = self.pass = null; alert('Attenzione: Logout effettuato con successo. Stai tornando al login'); self.transit("loginHome"); break;
                            case "Corsi_Docenti":
                                if(data === "errore"){
                                    self.successo = false; self.errore2 = true;
                                }else if(data === "aggiunto"){
                                    self.errore2 = false; self.successo = true;
                                    setTimeout(() => {
                                        self.transit('amministratoreHome');
                                    }, 1500);
                                } break;
                            case "Ripetizioni":
                                if(data === "errore"){
                                    self.successo = false; self.errore2 = true;
                                }else if(data === "aggiunta") {
                                    self.errore2 = false; self.successo = true;
                                    setTimeout(() => {
                                        self.transit('amministratoreHome');
                                    }, 1500);
                                } break;
                            case "Prenota":
                                if(data === "errore"){
                                    self.successo = false; self.errore2 = true;
                                }else if(data === "aggiunta"){
                                    self.errore2 = self.stampaPr = false; self.transit('ripetizioni');
                                } break;
                            case "Riprenota": case "Disdetta":
                                self.stampaMPr = false; self.transit('mieprenotazioni'); break;
                        }
                    })
                },

                //ServletController, gestisce le Servlet che ci servono con la doGet e passa i data che ottiene alle chiamate
                ServletControllerGet: function (flag){
                    var self = this;
                    $.get(this.link, {account: this.acc, password: this.pass, action: flag,}, function (data) {
                        switch (flag){
                            //Sezione Servlet/Docenti, stampa dei docenti
                            case "Docenti":
                                self.printD = data; break;
                                //Sezione Servlet/Corsi
                            case "Corsi":
                                self.printC = data; break;
                                //Sezione Servlet/Corsi_Docenti
                            case "Corsi_Docenti":
                                self.printCD = data; break;
                                //Sezione Servlet/Ripetizioni, stampa delle ripetizioni
                            case "Ripetizioni":
                                self.printR = data; break;
                               //Sezione Servlet/Prenotazioni, stampa delle prenotazioni personali dei clienti
                            case "MiePrenotazioni":
                                self.printMPr = data; break;
                                //Sezione Servlet/Prenotazioni, stampa delle prenotazioni totali
                            case "Prenotazioni":
                                self.printPr = data; break;
                        }
                    })
                },

                //Funzione per il transito da pagina a pagina e per la stampa degli oggetti Json
                transit: function (flag) {
                    switch (flag){
                        case "creazione":
                            this.creazionehome = true; this.loginHome = this.errore2 = this.checkC = false; break;
                        case "ospiteHome":
                            this.homeOspite = this.checkO = true; this.loginHome = this.stampaD = this.stampaR = this.stampaCD = false; break;
                        case "logout":
                            this.ServletControllerPost("logout", ''); break;
                        case "loginHome":
                            this.loginHome = true; this.homeAmministratore = this.creazionehome = this.homeOspite = this.homeCliente = this.logout = this.checkO = this.errore2 = false; break;
                        case "amministratoreHome":
                             this.homeAmministratore = this.checkAH = true; this.loginHome = this.stampaPr = this.stampaD = this.stampaMPr = this.stampaR = this.stampaCD = this.gestioneCD = this.gestioneR = this.errore2 = this.successo = false; break;
                        case "clienteHome":
                             this.homeCliente = this.checkCl = true; this.loginHome = this.stampaMPr = this.stampaD = this.stampaR = this.stampaCD = false; break;
                        case "gestioneCD":
                            this.gestioneCD = true; this.stampaCD = this.checkAH = this.gestioneR = this.errore2 = this.stampaMPr = this.stampaR = this.stampaPr = this.successo = false; this.corsi = this.teacher = this.var2 = null; this.ServletControllerGet("Corsi"); this.ServletControllerGet("Docenti"); break;
                        case "gestioneR":
                            this.gestioneR = true; this.checkAH = this.stampaCD = this.gestioneCD = this.stampaMPr = this.stampaR = this.stampaPr = this.errore2 = this.successo = false; this.corsi = this.teacher = null; this.ServletControllerGet("Corsi"); this.ServletControllerGet("Docenti"); this.ServletControllerGet("Ripetizioni"); break;
                        case "aggiungiPr":
                            this.checkAH = this.errore2 = this.successo = false; this.corsi = this.teacher = this.var2 = null; break;
                        case "corsi_docenti":
                            this.stampaCD = true; this.checkCl = this.checkAH = this.checkO = false; this.ServletControllerGet("Corsi_Docenti"); break;
                        case "docenti":
                            this.stampaD = true; this.checkCl = this.checkAH = this.checkO = false; this.ServletControllerGet("Docenti"); break;
                        case "ripetizioni":
                            this.stampaR = true; this.checkCl = this.checkAH = this.checkO = this.stampaPr = this.stampaMPr = this.gestioneCD = this.gestioneR = false; this.ServletControllerGet("Ripetizioni"); break;
                        case "prenotazioni":
                            this.stampaPr = true; this.checkCl = this.checkAH = this.checkO = this.stampaCD = this.stampaMPr = this.gestioneR = this.gestioneCD = this.stampaMPr = this.stampaR = this.gestioneCD = this.gestioneR = false; this.ServletControllerGet("Prenotazioni"); break;
                        case "mieprenotazioni":
                            this.stampaMPr = true; this.checkCl = this.checkAH = this.checkO = this.stampaPr = this.stampaR = this.gestioneCD = this.gestioneR = false; this.ServletControllerGet("MiePrenotazioni"); break;
                        case "alert":
                            alert('Non hai prenotazioni. Sei un ospite!');
                    }
                },
            }
        })
    </script>
</body>
</html>

