<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Cache-Control" content="no-store" />
    <title>Booking</title>

    <link href="bootstrap-4.5.2-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/jquery-slim.min.js"></script>
    <script src="bootstrap-4.5.2-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link rel="stylesheet" href="css/stileindex.css">

</head>
<body>
    <div id="components">
        <span v-if="loginHome"><br><br><br><br><br>
            <div class="container h-100">
                <div class="d-flex justify-content-center h-100">
                    <div class="user_card">
                        <div class="d-flex justify-content-center">
                            <div class="brand_logo_container">
                                <img src="https://upload.wikimedia.org/wikipedia/it/thumb/4/47/Unito-logo.svg/1200px-Unito-logo.svg.png" class="brand_logo" alt="Logo">
                            </div>
                        </div>
                        <br>
                        <div class="d-flex justify-content-center form_container">
                            <article class="form-group">
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                <input v-model="em" type="text" class="form-control input_user" placeholder="Email">
                                </div>
                                <div class="input-group mb-2">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                                    </div>
                                    <input v-model="pass" type="password" class="form-control input_pass" placeholder="Password">
                                </div>
                                <div class="d-flex justify-content-center mt-3 login_container">
                                    <button v-on:click="ServletControllerPost('login', '')" class="btn login_btn">Autentica </button>
                                </div>

                                <template v-if="checkA">
                                    <span class="badge badge-success">Successo</span>
                                </template>
                                <template v-if="check">
                                    <span class="badge badge-success">Successo</span>
                                </template>
                                <template v-if="checkE">
                                    <span class="badge badge-danger">Errore nel login</span>
                                </template>
                                <br>
                                <centro-login v-on:ospite-inner="ServletControllerPost('ospite', '')" v-on:creazione-inner="transit('creazione')" ></centro-login>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </span>

        <span v-if="creazionehome"><br>
            <testa title="BENVENUTO. CREA IL TUO ACCOUNT"></testa>
            <br><br><br>
            <button class="btn btn-info" v-on:click="transit('loginHome')">Annulla creazione</button>
            <div class="container h-100">
                <div class="d-flex justify-content-center h-100">
                    <div class="user_card">
                        <div class="d-flex justify-content-center">
                            <div class="brand_logo_container">
                                <img src="https://upload.wikimedia.org/wikipedia/it/thumb/4/47/Unito-logo.svg/1200px-Unito-logo.svg.png" class="brand_logo" alt="Logo">
                            </div>
                        </div>
                        <div class="d-flex justify-content-center form_container">
                            <article class="form-group">
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                <input v-model="em" type="text" class="form-control input_user" placeholder="Email">
                                </div>
                                <div class="input-group mb-3">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    </div>
                                <input v-model="acc" type="text" class="form-control input_user" placeholder="Account">
                                </div>
                                <div class="input-group mb-2">
                                    <div class="input-group-append">
                                        <span class="input-group-text"><i class="fas fa-key"></i></span>
                                    </div>
                                    <input v-model="pass" type="password" class="form-control input_pass" placeholder="Password">
                                </div>
                                <div class="d-flex justify-content-center mt-3 login_container">
                                    <button v-on:click="ServletControllerPost('crea', '')" class="btn login_btn">Crea account </button>
                                </div>

                                <template v-if="checkC">
                                    <p>Cliente Benvenuto!</p>
                                    <p><span class="badge badge-success">Successo</span> Account creato</p>
                                </template>
                                <template v-if="errore2">
                                    <span class="badge badge-danger">Errore nei dati, ricontrolla e riprova. Grazie</span>
                                </template>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </span>

        <span v-if="homeCliente">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('clienteHome')">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('mieprenotazioni')">Prenotazioni</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('ripetizioni')">Ripetizioni</a>
                            </li>
                            <li>
                                <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <logout v-if="logout"></logout>

            <!--HOME CLIENTE-->
            <home v-if="checkCl" v-on:transit-inner-prenotazioni="transit('mieprenotazioni')" v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')"></home>


            <!--SEZIONE STAMPA E AGGIUNTA DEI DATI-->
            <div class="container">
               <hr>
                <!--STAMPA DEI CORSI E DOCENTI-->
                <div v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE MIE PRENOTAZIONI-->
                <div v-if="stampaMPr">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printMPr">
                                <tr><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td><td v-if="prenotazioni.status === 'RIMOSSA'"><button class="btn btn-info" v-on:click="ServletControllerPost('Riprenota', prenotazioni.codice)">Riprenota</button></td><td v-else><button class="btn btn-danger" v-on:click="ServletControllerPost('Disdetta', prenotazioni.codice)">Disdetta</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE RIPETIZIONI-->
                <div v-if="stampaR">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.codice}}</td><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td><td><span class="badge bg-warning text-dark">{{ripetizioni.status}}</span></td><td><button class="btn btn-info" v-on:click="ServletControllerPost('Prenota', ripetizioni.codice)">Prenota</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <template v-if="errore2" class="container">
                        <span class="badge badge-danger">Ti sei già prenotato per questa lezione.</span>
                </template>
            </div>

        </span>

        <span v-if="homeOspite">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav2">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('ospiteHome')">Home</a>
                            </li>
                            <li>
                                <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <logout v-if="logout"></logout>

            <home v-if="checkO"  v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')" ></home>

            <!--SEZIONE STAMPA DEI DATI-->
            <div class="container">
               <hr>
                <div v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <div v-if="stampaR">
                    <table>
                        <thead>
                            <tr><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </span>

        <span v-if="homeAmministratore">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #e3f2fd;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="https://www.unito.it/">UniTO</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav3">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" aria-current="page" type="button" v-on:click="transit('amministratoreHome')">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Prenotazioni attive</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('mieprenotazioni')">Prenotazioni</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" type="button" v-on:click="transit('ripetizioni')">Ripetizioni</a>
                            </li>
                            <li class="nav-item">
                                <a class="btn btn-warning" type="button" v-on:click="transit('logout')">Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <logout v-if="logout"></logout>
            <!--HOME AMMINISTRATORE-->
            <home v-if="checkAH" v-on:transit-inner-prenotazioni="transit('mieprenotazioni')" v-on:transit-inner-corsi_docenti="transit('corsi_docenti')" v-on:transit-inner-ripetizioni="transit('ripetizioni')"></home>
            <article v-if="checkAH" class="container">
                <ul>
                    <br>
                    <li>
                        <button class="btn btn-secondary" style="background: #f39c12" v-on:click="transit('prenotazioni')">Le prenotazioni attive</button>&nbsp&nbsp&nbsp<button class="btn btn-secondary" style="background: #f39c12" v-on:click="transit('gestioneCD')">Gestione di corsi e docenti</button>&nbsp&nbsp&nbsp<button class="btn btn-secondary" style="background: #f39c12" v-on:click="transit('aggiungiR')">Aggiungi ripetizioni</button>
                    </li>
                </ul>
            </article>

            <!--SEZIONE STAMPA E AGGIUNTA DEI DATI-->
            <div class="container">
               <hr>
                <!--STAMPA DEI CORSI E DOCENTI-->
                <div v-if="stampaCD">
                    <table>
                        <thead>
                            <tr><td><i><b>CORSO</b></i></td><td><i><b>DOCENTE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="co_do in printCD">
                                <tr><td>{{co_do.corso}}</td><td>{{co_do.docente}}</td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE RIPETIZIONI-->
                <div v-if="stampaR">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="ripetizioni in printR">
                                <tr><td>{{ripetizioni.codice}}</td><td>{{ripetizioni.docente}}</td><td>{{ripetizioni.corso}}</td><td>{{ripetizioni.giorno}}</td><td>{{ripetizioni.ora}}</td><td><span class="badge bg-warning text-dark">{{ripetizioni.status}}</span></td><td><button class="btn btn-info" v-on:click="ServletControllerPost('Prenota', ripetizioni.codice)">Prenota</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE PRENOTAZIONI-->
                <div v-if="stampaPr">
                    <table>
                        <thead>
                            <tr><td><i><b>UTENTE</b></i></td><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printPr">
                                <tr><td>{{prenotazioni.utente}}</td><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--STAMPA DELLE MIE PRENOTAZIONI-->
                <div v-if="stampaMPr">
                    <table>
                        <thead>
                            <tr><td><i><b>CODICE</b></i></td><td><i><b>DOCENTE</b></i></td><td><i><b>CORSO</b></i></td><td><i><b>GIORNO</b></i></td><td><i><b>ORE</b></i></td><td><i><b>STATUS</b></i></td><td><i><b>OPERAZIONE</b></i></td></tr>
                        </thead>
                        <tbody>
                            <template v-for="prenotazioni in printMPr">
                                <tr><td>{{prenotazioni.codice}}</td><td>{{prenotazioni.docente}}</td><td>{{prenotazioni.corso}}</td><td>{{prenotazioni.giorno}}</td><td>{{prenotazioni.ora}}</td><td v-if="prenotazioni.status === 'RIMOSSA'"><span class="badge rounded-pill bg-danger">{{prenotazioni.status}}</span></td><td v-else><span class="badge badge-success">{{prenotazioni.status}}</span></td><td v-if="prenotazioni.status === 'RIMOSSA'"><button class="btn btn-info" v-on:click="ServletControllerPost('Riprenota', prenotazioni.codice)">Riprenota</button></td><td v-else><button class="btn btn-danger" v-on:click="ServletControllerPost('Disdetta', prenotazioni.codice)">Disdetta</button></td></tr>
                            </template>
                        </tbody>
                    </table>
                </div>

                <!--FORMA DELLA AGGIUNTA DI CORSI E DOCENTI-->
                <article v-if="gestioneCD" >
                    <h4>Aggiunta di corsi e docenti affiliati</h4>
                    <p>-Hai la possibilit&aacute; di aggiungere un nuovo corso, un nuovo docente e creare la loro affiliazione.</p>
                    <br>
                    <div class="form-group">
                        <label for="aggiungiCorso">Aggiungi il corso:</label>
                        <input v-model="courses" id="aggiungiCorso" type="text"  placeholder="Nome" required>

                        <hr>
                        <label for="aggiungiDocente">Aggiungi il docente:</label>
                        <input v-model="var1" id="aggiungiDocente" type="text" placeholder="Nome" required>
                        <input v-model="var2" type="text" placeholder="Cognome" required>

                        <br><br>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" v-on:click="ServletControllerPost('Corsi_Docenti', 'Aggiunta')">Conferma dati</button>
                        </div>
                    </div>

                    <hr>
                    <h4>Rimozione di corsi e docenti</h4>
                    <p>-Hai la possibilit&aacute; di rimuovere un docente o un corso con le loro affiliazioni. Solo se non compaiono in nessuna prenotazioni attiva.</p>
                    <label>Seleziona docente da rimuovere&nbsp</label>
                    <select v-model="docElim">
                        <option v-for="co_do in printD">{{co_do.nome}} {{co_do.cognome}}</option>
                    </select>
                    <br>
                    <label>Selezione corso da rimuovere&nbsp&nbsp&nbsp&nbsp&nbsp</label>
                    <select v-model="corsElim">
                        <option v-for="co_do in printC">{{co_do.titolo}}</option>
                    </select>
                    <br>
                    <div class="d-grid gap-2">
                        <button class="btn btn-primary" v-on:click="ServletControllerPost('Corsi_Docenti', 'Rimozione')">Conferma</button>
                    </div>
                </article>

                <!--FORMA DELLA AGGIUNTA DELLE RIPETIZIONI-->
                <article v-if="aggiungiR">
                    <h4>Aggiunta di nuove ripetizioni</h4>
                    <p>-Scegli il docente, il corso, la data e l'ora della ripetizione.</p>
                    <br>
                    <div class="form-group">
                        <label>Docente</label>
                        <select v-model="var1">
                            <option v-for="co_do in printD">{{co_do.nome}} {{co_do.cognome}}</option>
                        </select>

                        <label>Corso</label>
                        <select v-model="courses">
                            <option v-for="co_do in printC">{{co_do.titolo}}</option>
                        </select>

                        <label>Data</label>
                        <select v-model="day">
                            <option>Lunedi</option>
                            <option>Martedi</option>
                            <option>Mercoledi</option>
                            <option>Giovedi</option>
                            <option>Venerdi</option>
                        </select>

                        <label>Ora</label>
                            <select v-model="hour">
                                <option>15:00</option>
                                <option>16:00</option>
                                <option>17:00</option>
                                <option>18:00</option>
                                <option>19:00</option>
                            </select>
                            <br>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary" v-on:click="ServletControllerPost('Ripetizioni', '')">Conferma dati</button>
                            </div>
                        </div>
                    </article>

                <!--STAMPA DELL'ERRORE O SUCCESSO-->
                <template v-if="errore2" >
                            <span class="badge badge-danger">Errore nei dati inseriti, ricontrolla e riprova. Grazie</span>
                    </template>
                <template v-if="successo">
                            <span class="badge badge-success">Successo</span>
                    </template>
            </div>

        </span>
    </div>

    <script>
        //VueLogin
        Vue.component('testa',{
            props: ['title'],
            template:'<header><h3 class="text-center">{{ title }}</h3><br></header>',
        })
        Vue.component('centro-login',{
            template:'<article class="d-flex justify-content-center links">' +
                    '     <p>Non hai ancora un account? <button type="button" class="btn btn-outline-dark" style="background: #c0392b" v-on:click="creazioneInner"> Crea account</button>' +
                    '     <br><br>Oppure entra come ospite&nbsp&nbsp&nbsp&nbsp<button type="button" class="btn btn-outline-dark" style="background: #c0392b" v-on:click="ospiteInner">Entra </button></p>' +
                    '</article>',
            methods: {
                creazioneInner: function (){
                    this.$emit('creazione-inner');
                },

                ospiteInner: function (){
                    this.$emit('ospite-inner');
                }
            }
        })

        Vue.component('logout',{
            template:'<article class="container">' +
                '           <span class="badge bg-warning text-dark">Attenzione:</span>\n' +
                '           <p> Logout effettuato con successo. Stai tornando al login</p>' +
                '     </article>',
        })
        //home di ospite/cliente/amministratore
        Vue.component('home',{
            template:
                '<article class="container">' +
                '    <br><br>' +
                '        <h5>Scegli l&rsquo;opzione che desideri</h5>\n' +
                '            <br>\n' +
                '            <button class="botton" v-on:click="transitCorsi_Docenti"><img src="img/lista.png" width="280" height="280" alt><br> Visualizza corsi e docenti</button>\n' +
                '&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'+
                '            <button class="botton" v-on:click="transitRipetizioni"><img src="img/prenotazionecortisonici2020-1.png" width="280" height="280" alt><br>Prenota le tue lezioni</button>\n' +
                '&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp'+
                '            <button class="botton" v-on:click="transitPrenotazioni"> <img src="img/docentecorso.png" height="280" width="280" alt> <br>Le  mie prenotazioni</button>\n' +
                '</article>',
            methods: {
                transitPrenotazioni: function () {
                    this.$emit('transit-inner-prenotazioni');
                },
                transitDocenti: function () {
                    this.$emit('transit-inner-docenti');
                },
                transitRipetizioni: function () {
                    this.$emit('transit-inner-ripetizioni');
                },
                transitCorsi_Docenti: function (){
                    this.$emit('transit-inner-corsi_docenti');
                }
            }
        })

        var app = new Vue ({
            el: '#components',
            data: {
                loginHome: true, em: null, acc: null, pass: null, role: 'Ospite', check: false, checkA: false, checkE: false,
                homeAmministratore: false, logout: false, errore2: false, successo: false, checkAH: false, gestioneCD: false, aggiungiR: false, printPr: [], stampaPr: false, ourses: null, var1: null, var2: null, docElim: null, corsElim: null, day: null, hour: null,
                homeOspite: false, checkO: false,
                homeCliente: false, checkCl: false, printCD: [], printC: [], printD: [], printR: [], printMPr: [], stampaCD: false, stampaD: false, stampaR: false, stampaMPr: false,
                creazionehome: false, checkC: false, print: '',

                link: 'ServletController'
            },
            methods: {
                //ServletController, gestisce le Servlet che ci servono con la doPost e passa i data che ottiene alle chiamate
                ServletControllerPost: function (flag, flag2){
                    var self = this;
                    $.post(this.link, {email: this.em, account: this.acc, password: this.pass, action: flag, action2: flag2, corsi: this.courses, nome: this.var1, cognome: this.var2, giorno: this.day, ora: this.hour, docEli: this.docElim, corEli: this.corsElim}, function (data) {
                        //Sezione Servlet Login
                        if(flag === 'login' || flag === 'crea'|| flag === 'ospite'){
                            switch (data) {
                                case 'sono amministratore':
                                    self.role = 'Amministratore'; self.checkA = true; self.checkE = false; self.check = false;
                                    setTimeout(() => {
                                        self.transit("amministratoreHome");
                                    }, 2300);
                                    break;
                                case 'sono cliente':
                                    self.role = 'Cliente'; self.check = true; self.checkA = false; self.checkE = false;
                                    setTimeout(() => {
                                        self.transit("clienteHome");
                                    }, 2300);
                                    break;
                                case 'sono ospite':
                                    self.role = 'Ospite'; self.transit("ospiteHome");
                                    break;
                                case 'errore':
                                    self.check = false; self.checkA = false; self.checkE = true;
                                    break;
                                case 'crea':
                                    self.checkC = true; self.em = null; self.acc = null; self.pass = null; self.errore2 = false;
                                    setTimeout(() => {
                                        self.transit('loginHome');
                                    }, 2000);
                                    break;
                                case 'errore2':
                                    self.errore2 = true;
                                    break;
                                case 'ospite':
                                    self.role = 'Ospite'; self.transit("ospiteHome");
                                    break;
                            }
                            //Sezione Servlet/Logout
                        }else if(flag === 'logout'){
                            self.logout = true; self.em = null; self.pass = null;
                            setTimeout(() => {
                                self.transit("loginHome");
                            }, 2300);
                        }else if(flag === 'Corsi_Docenti') {
                            if(data === "errore"){
                                self.successo = false; self.errore2 = true;
                            }else if(data === "aggiunto"){
                                self.errore2 = false; self.successo = true;
                                setTimeout(() => {
                                    self.transit('amministratoreHome');
                                }, 2000);
                            }
                        }else if(flag === 'Ripetizioni'){
                            if(data === "errore"){
                                self.successo = false; self.errore2 = true;
                            }else if(data === "aggiunta"){
                                self.errore2 = false; self.successo = true;
                                setTimeout(() => {
                                    self.transit('amministratoreHome');
                                }, 2000);
                            }
                        }else if(flag === 'Prenota') {
                            if(data === "errore"){
                                self.successo = false; self.errore2 = true;
                            }else if(data === "aggiunta"){
                                this.stampaMPr = false;
                                self.errore2 = false;
                            }
                        }else if(flag === 'Riprenota') {
                            if(data === "riaggiunta"){
                               self.stampaMPr = false; self.transit('mieprenotazioni');
                            }
                        }else if(flag === 'Disdetta') {
                            if(data === "rimossa"){
                                self.stampaMPr = false; self.transit('mieprenotazioni');
                            }
                        }
                    })
                },

                //ServletController, gestisce le Servlet che ci servono con la doGet e passa i data che ottiene alle chiamate
                ServletControllerGet: function (flag){
                    var self = this;
                    $.get(this.link, {account: this.acc, password: this.pass, action: flag,}, function (data) {
                        //Sezione Servlet Login
                        if(flag === 'login' || flag === 'crea'|| flag === 'ospite'){
                            switch (data) {
                                case 'errore':
                                    self.check = false; self.checkA = false; self.checkE = true;
                                    break;
                            }
                            //Sezione Servlet/Docenti, stampa dei docenti
                        }else if(flag === 'Docenti'){
                            self.printD = data;
                            //Sezione Servlet/Corsi
                        }else if(flag === 'Corsi'){
                            self.printC = data;
                            //Sezione Servlet/Corsi_Docenti
                        }else if(flag === 'Corsi_Docenti'){
                            self.printCD = data;
                            //Sezione Servlet/Ripetizioni, stampa delle ripetizioni
                        }else if(flag === 'Ripetizioni'){
                            self.printR = data;
                           //Sezione Servlet/Prenotazioni, stampa delle prenotazioni personali dei clienti
                        }else if(flag === 'MiePrenotazioni'){
                            self.printMPr = data;
                            //Sezione Servlet/Prenotazioni, stampa delle prenotazioni totali
                        }else if(flag === 'Prenotazioni'){
                            self.printPr = data;
                    }
                    })
                },

                //Funzione per il transito da pagina a pagina e per la stampa degli oggetti Json
                transit: function (flag) {
                    //this.printR = [];
                    if(flag === 'creazione') {
                        this.loginHome = false; this.creazionehome = true; this.errore2 = false; this.checkC = false;
                    }else if(flag === 'ospiteHome'){
                        this.loginHome = false; this.homeOspite = true; this.checkO = true; this.stampaD = false; this.stampaR = false; this.stampaCD = false;
                    }else if(flag === 'logout') {
                        this.ServletControllerPost("logout", '');
                    }else if(flag === 'loginHome') {
                        this.loginHome = true; this.homeAmministratore = false; this.creazionehome = false; this.homeOspite = false; this.homeCliente = false; this.logout = false; this.check = false; this.checkA = false; this.checkO = false; this.errore2 = false;
                    }else if(flag === 'amministratoreHome'){
                        this.loginHome = false; this.homeAmministratore = true; this.checkAH = true; this.stampaD = false; this.stampaMPr = false; this.stampaR = false; this.stampaCD = false; this.gestioneCD = false; this.aggiungiR = false; this.aggiungiP = false; this.errore2 = false; this.successo = false;
                    }else if(flag === 'clienteHome'){
                        this.loginHome = false; this.homeCliente = true; this.checkCl = true; this.stampaMPr = false; this.stampaD = false; this.stampaR = false; this.stampaCD = false;
                    }else if(flag === 'gestioneCD'){
                        this.checkAH = false; this.gestioneCD = true; this.corsi = null; this.var1 = null; this.var2 = null; this.errore2 = false; this.successo = false; this.ServletControllerGet("Corsi"); this.ServletControllerGet("Docenti");
                    }else if(flag === 'aggiungiR'){
                        this.checkAH = false; this.aggiungiR = true; this.corsi = null; this.var1 = null; this.errore2 = false; this.successo = false; this.ServletControllerGet("Corsi"); this.ServletControllerGet("Docenti");
                    }else if(flag === 'aggiungiPr'){
                        this.checkAH = false; this.aggiungiP = true; this.corsi = null; this.var1 = null; this.var2 = null; this.errore2 = false; this.successo = false;
                    } else if(flag === 'corsi_docenti'){
                        this.checkCl = false; this.checkAH = false; this.checkO = false; this.stampaCD = true; this.ServletControllerGet("Corsi_Docenti");
                    }else if(flag === 'docenti'){
                        this.checkCl = false; this.checkAH = false; this.checkO = false; this.stampaD = true; this.ServletControllerGet("Docenti");
                    }else if(flag === 'ripetizioni'){
                        this.checkCl = false; this.checkAH = false; this.checkO = false; this.stampaPr = false; this.stampaR = true; this.stampaMPr = false; this.ServletControllerGet("Ripetizioni");
                    }else if(flag === 'prenotazioni'){
                        this.checkCl = false; this.checkAH = false; this.checkO = false; this.stampaPr = true; this.stampaMPr = false; this.stampaR = false; this.ServletControllerGet("Prenotazioni");
                    }else if(flag === 'mieprenotazioni'){
                        this.checkCl = false; this.checkAH = false; this.checkO = false; this.stampaPr = false; this.stampaMPr = true; this.stampaR = false; this.ServletControllerGet("MiePrenotazioni");
                    }
                },
            }
        })
    </script>
</body>
</html>

